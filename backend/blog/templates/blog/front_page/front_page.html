{% extends 'core/base.html' %}
{% block title %}{{ site_identity.title }}{% endblock %}
{% block head_links %}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"
/>
{% endblock %}
{% block content %}
{% for category in categories %}
<div class="section">
    
    <a href="{{ category.get_absolute_url }}">
        <h3 class="title is-3 m-2">
            {{ category.name }}
        </h3>
    </a>
    
    <!-- Slider main container -->
    <div class="swiper">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
            <!-- Slides -->
            {% for featured_post in category.get_featured_posts %}
            <div class="swiper-slide">
                <a href="{{ featured_post.get_absolute_url }}">
                    <div class="card is-shadowless card-with-annotation">
                        <div class="card-image">
                            <figure class="image is-3by4">
                                {% if featured_post.front_page_image %}
                                    <img src="{{ featured_post.front_page_image.url }}"
                                                alt="{{ featured_post.title }}">
                                {% else %}
                                    <img src="https://bulma.io/images/placeholders/1280x960.png"
                                                alt="Placeholder image">
                                {% endif %}
                                <div class="card-image-annotation">
                                    <p class="subtitle is-5 has-text-light">
                                        {{ featured_post.title }}
                                    </p>
                                </div>
                            </figure>
                        </div>
                        
                    </div>
                </a>
            </div>
        {% if forloop.last %}
            <div class="swiper-slide">
                <a href="{{ category.get_absolute_url }}">
                    <div class="card is-shadowless">
                        <div class="card-image">
                            <figure class="image is-3by4">
                                {% comment %} TODO: change this to category preview pic {% endcomment %}
                                {% if featured_post.front_page_image %}
                                    <img src="{{ featured_post.front_page_image.url }}"
                                                alt="{{ featured_post.title }}">
                                {% else %}
                                    <img src="https://bulma.io/images/placeholders/1280x960.png"
                                                alt="Placeholder image">
                                {% endif %}
                                <div class="card-image-annotation">
                                    <p class="subtitle is-5 has-text-light">
                                        More of {{ category.name }}
                                    </p>
                                </div>
                            </figure>
                        </div>
                    </div>
                </a>
            </div>
        {% endif %}
        {% endfor %}
        </div>
        <!-- If we need pagination -->
        <div class="swiper-pagination"></div>
    
        <!-- If we need navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    
        <!-- If we need scrollbar -->
        <div class="swiper-scrollbar"></div>
    </div>

    
</div>
{% endfor %}
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<script>
    const swiper = new Swiper('.swiper', {
        // Optional parameters
        // Default parameters
        slidesPerView: 2,
        spaceBetween: 10,
        // Responsive breakpoints
        breakpoints: {
            // touch devices
            769: {
            slidesPerView: 3,
            },
            // desktop
            1024: {
            slidesPerView: 4,
            },
            // widescreen
            1216: {
            slidesPerView: 5,
            }
        },
      
        // If we need pagination
        pagination: {
          el: '.swiper-pagination',
        },
      
        // Navigation arrows
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      
        // And if we need scrollbar
        scrollbar: {
          el: '.swiper-scrollbar',
        },
      });
</script>
{% endblock %}