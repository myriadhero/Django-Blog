{% extends "core/base.html" %}
{% block title %}
    {{ site_identity.title }} - {{ subcategory.name }}
{% endblock title %}
{% block content %}
    <div class="section">
        <h3 class="title is-3 is-uppercase is-flex is-flex-direction-row is-flex-wrap-wrap is-align-items-baseline">
            {% if category %}
                <a href="{{ category.get_absolute_url }}" class="title">{{ category.name }}</a>
                <i class="fa-solid fa-chevron-right is-size-5 has-text-primary mx-2"></i>
                <a href="{% url "blog:category_subcategory" category.slug subcategory.slug %}"
                   class="title">{{ subcategory.name }}</a>
            {% else %}
                <a href="{{ subcategory.get_absolute_url }}" class="title">{{ subcategory.name }}</a>
            {% endif %}
        </h3>
        <div class="level is-mobile">
            <div class="level-left">
                <label for="cat_tag_select" class="level-item">Filter by:</label>
                <div class="select level-item">
                    <select name="tag"
                            id="cat_tag_select"
                            hx-get="{{ subcategory.get_absolute_url }}"
                            hx-target="#list-items"
                            data-url="{{ subcategory.get_absolute_url }}"
                            hx-swap="outerHTML">
                        <option value="">All</option>
                        {% for tag in tags %}
                            <option value="{{ tag.slug }}"
                                    {% if selected_tag and tag == selected_tag %}selected{% endif %}>
                                {{ tag.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        {% include "blog/post/includes/post_list.html" %}
    </div>
{% endblock content %}
{% block scripts %}
    {% load static %}
    <script src="{% static 'js/htmx_helpers.js' %}"></script>
{% endblock scripts %}
