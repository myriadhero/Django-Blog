{% load blog_tags %}
{% load core_tags %}
<div id="header-bar" class="is-uppercase sticky is-hidden-touch">
  <div>
    <div class="container is-flex is-justify-content-space-between">
      <div class="navbar-item title-search">
        <form action="{% url 'blog:post_search' %}"
              method="get"
              class="control has-icons-left title-search-form">
          <span class="icon">
            <svg width="24"
                 height="24"
                 viewBox="0 0 24 24"
                 fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path d="M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M22 22L20 20" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <input type="text"
                 class="input title-search-input"
                 placeholder="SEARCH"
                 name="query">
        </form>
      </div>
      <div class="is-flex is-flex-direction-row">
        {% get_social_media_links as sm_links %}
        <a class="navbar-item" href="{% url 'about' %}" data-filter="about">
          <span class="is-flex">About</span>
        </a>
        {% if sm_links.twitter_url %}
          <a class="navbar-item" href="{{ sm_links.twitter_url }}" target="_blank">
            <span class="is-flex">
              <svg width="20"
                   height="20"
                   viewBox="0 0 20 20"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M11.1 8.2L16.6 1.7" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M2.70001 18.3L8.50001 11.3" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M18.5 18.3L5.9 1.7H1.5L14.1 18.3H18.5Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
          </a>
        {% endif %}
        {% if sm_links.youtube_url %}
          <a class="navbar-item" href="{{ sm_links.youtube_url }}" target="_blank">
            <span class="is-flex">
              <svg width="24"
                   height="24"
                   viewBox="0 0 24 24"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9.09998 12V10.52C9.09998 8.61001 10.45 7.84001 12.1 8.79001L13.38 9.53001L14.66 10.27C16.31 11.22 16.31 12.78 14.66 13.73L13.38 14.47L12.1 15.21C10.45 16.16 9.09998 15.38 9.09998 13.48V12Z" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
          </a>
        {% endif %}
        <a class="navbar-item"
           href="{% url "blog:post_feed" %}"
           target="_blank"
           aria-label="Blog Post RSS Feed">
          <span class="is-flex">
            <svg width="24"
                 height="24"
                 viewBox="0 0 24 24"
                 fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path d="M8.68299 6.49023C13.2368 7.07006 16.5884 10.4217 17.1683 14.9755" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M7.62944 9.80659C10.9741 10.2379 13.4277 12.6916 13.8591 16.0362" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M7.00002 13.5472C8.6688 13.7593 9.89916 14.9896 10.1113 16.6584" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
        </a>
        {% get_subscription_options as sub_options %}
        {% if sub_options.show_kofi_link_in_head_menu %}
          <a class="navbar-item"
             href="https://ko-fi.com/{{ sub_options.kofi_account_name }}"
             data-filter="ko-fi"
             target="_blank">
            <span class="pr-1 is-flex">
              <svg width="24"
                   height="24"
                   viewBox="0 0 24 24"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M17.79 10.47V17.79C17.79 20.12 15.9 22 13.58 22H6.21C3.89 22 2 20.11 2 17.79V10.47C2 8.13999 3.89 6.25999 6.21 6.25999H13.58C15.9 6.25999 17.79 8.14999 17.79 10.47Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M5.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M13.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M22 13.16C22 15.48 20.11 17.37 17.79 17.37V8.95C20.11 8.95 22 10.83 22 13.16Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M2 12H17.51" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
            <span>Ko-fi</span>
          </a>
        {% endif %}
      </div>
    </div>
    <div id="header-bar-logo" class="is-transparent">
      <a href="{% url 'blog:front_page' %}">{% include "core/base_includes/logo_or_text_title.html" %}</a>
    </div>
  </div>
</div>
{% if site_identity.header_message %}
  <div class="is-flex" id="site-warning-wrapper">
    <div id="site-warning" class="has-background-dark has-text-white">
      <button class="delete"
              style="float:right;
                     margin-top:2px"
              onclick="this.parentElement.style.display='none';"></button>
      <i class="fa-solid fa-circle-info"></i> {{ site_identity.header_message }}
    </div>
  </div>
{% endif %}
<div id="desktop-title" class="is-hidden-touch has-text-centered p-4">
  <a href="{% url 'blog:front_page' %}">{% include "core/base_includes/logo_or_text_title.html" %}</a>
</div>
<div id="navbar" class="has-background-white">
  <nav class="navbar is-justify-content-center container"
       role="navigation"
       aria-label="main navigation">
    <div class="navbar-brand is-align-items-center is-hidden-desktop">
      <a class="navbar-item"
         id="mobile-title"
         href="{% url 'blog:front_page' %}">{% include "core/base_includes/logo_or_text_title.html" %}</a>
      <div class="navbar-search">
        <form action="{% url 'blog:post_search' %}"
              method="get"
              class="control has-icons-left title-search-form">
          <span class="icon">
            <svg width="24"
                 height="24"
                 viewBox="0 0 24 24"
                 fill="none"
                 xmlns="http://www.w3.org/2000/svg">
              <path d="M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M22 22L20 20" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <input type="text"
                 class="input title-search-input"
                 placeholder="SEARCH"
                 name="query">
        </form>
      </div>
      <a role="button"
         class="navbar-burger"
         aria-label="menu"
         aria-expanded="false"
         data-target="navbarMainMenu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div id="navbarMainMenu"
         class="navbar-menu is-justify-content-space-between">
      {% get_nav_items as all_nav_items %}
      {% for nav_item in all_nav_items %}
        {% if nav_item.is_dropdown %}
          <div class="navbar-item has-dropdown is-hoverable mobile-collapsed">
            <a class="navbar-link"
               href="{{ nav_item.primary_category.get_absolute_url }}">{{ nav_item.primary_category.name }}</a>
            <div class="navbar-dropdown">
              <a class="navbar-item" href="{{ nav_item.get_absolute_url }}">All {{ nav_item.primary_category.name }}</a>
              <hr class="navbar-divider">
              {% for subitem in nav_item.sub_items.all %}
                <a class="navbar-item" href="{{ subitem.get_absolute_url }}">{{ subitem.subcategory.name }}</a>
              {% endfor %}
            </div>
          </div>
        {% else %}
          <a class="navbar-item"
             href="{{ nav_item.primary_category.get_absolute_url }}">{{ nav_item.primary_category.name }}</a>
        {% endif %}
      {% endfor %}
      {% comment %} Mobile menu only {% endcomment %}
      {% get_social_media_links as sm_links %}
      <div class="navbar-item is-hidden-desktop has-background-warning p-0">
        <a class="navbar-item is-hidden-desktop"
           href="{% url 'about' %}"
           data-filter="about">
          <span class="icon-text">
            <span class="icon">
              <svg width="24"
                   height="24"
                   viewBox="0 0 24 24"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M18.14 21.62C17.26 21.88 16.22 22 15 22H8.99998C7.77998 22 6.73999 21.88 5.85999 21.62C6.07999 19.02 8.74998 16.97 12 16.97C15.25 16.97 17.92 19.02 18.14 21.62Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M15 2H9C4 2 2 4 2 9V15C2 18.78 3.14 20.85 5.86 21.62C6.08 19.02 8.75 16.97 12 16.97C15.25 16.97 17.92 19.02 18.14 21.62C20.86 20.85 22 18.78 22 15V9C22 4 20 2 15 2ZM12 14.17C10.02 14.17 8.42 12.56 8.42 10.58C8.42 8.60002 10.02 7 12 7C13.98 7 15.58 8.60002 15.58 10.58C15.58 12.56 13.98 14.17 12 14.17Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M15.58 10.58C15.58 12.56 13.98 14.17 12 14.17C10.02 14.17 8.42004 12.56 8.42004 10.58C8.42004 8.60002 10.02 7 12 7C13.98 7 15.58 8.60002 15.58 10.58Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
            <span>About</span>
          </span>
        </a>
        {% if sm_links.twitter_url %}
          <a class="navbar-item is-hidden-desktop"
             href="{{ sm_links.twitter_url }}"
             target="_blank">
            <span class="icon-text">
              <span class="icon">
                <svg width="20"
                     height="20"
                     viewBox="0 0 20 20"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.1 8.2L16.6 1.7" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M2.70001 18.3L8.50001 11.3" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M18.5 18.3L5.9 1.7H1.5L14.1 18.3H18.5Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              <span>{{ sm_links.twitter_name }}</span>
            </span>
          </a>
        {% endif %}
        {% if sm_links.youtube_url %}
          <a class="navbar-item is-hidden-desktop"
             href="{{ sm_links.youtube_url }}"
             target="_blank">
            <span class="icon-text">
              <span class="icon">
                <svg width="24"
                     height="24"
                     viewBox="0 0 24 24"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M9.09998 12V10.52C9.09998 8.61001 10.45 7.84001 12.1 8.79001L13.38 9.53001L14.66 10.27C16.31 11.22 16.31 12.78 14.66 13.73L13.38 14.47L12.1 15.21C10.45 16.16 9.09998 15.38 9.09998 13.48V12Z" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              <span>{{ sm_links.youtube_name }}</span>
            </span>
          </a>
        {% endif %}
        <a class="navbar-item is-hidden-desktop"
           href="{% url "blog:post_feed" %}"
           target="_blank">
          <span class="icon-text">
            <span class="icon">
              <svg width="24"
                   height="24"
                   viewBox="0 0 24 24"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path d="M8.68299 6.49023C13.2368 7.07006 16.5884 10.4217 17.1683 14.9755" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M7.62944 9.80659C10.9741 10.2379 13.4277 12.6916 13.8591 16.0362" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M7.00002 13.5472C8.6688 13.7593 9.89916 14.9896 10.1113 16.6584" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
            <span>Subscribe to RSS feed</span>
          </span>
        </a>
        {% get_subscription_options as sub_options %}
        {% if sub_options.show_kofi_link_in_head_menu %}
          <a class="navbar-item is-hidden-desktop"
             href="https://ko-fi.com/{{ sub_options.kofi_account_name }}"
             data-filter="ko-fi"
             target="_blank">
            <span class="icon-text">
              <span class="icon">
                <svg width="24"
                     height="24"
                     viewBox="0 0 24 24"
                     fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.79 10.47V17.79C17.79 20.12 15.9 22 13.58 22H6.21C3.89 22 2 20.11 2 17.79V10.47C2 8.13999 3.89 6.25999 6.21 6.25999H13.58C15.9 6.25999 17.79 8.14999 17.79 10.47Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M5.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M9.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M13.5 4V2.25" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M22 13.16C22 15.48 20.11 17.37 17.79 17.37V8.95C20.11 8.95 22 10.83 22 13.16Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M2 12H17.51" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              <span>Ko-fi</span>
            </span>
          </a>
        {% endif %}
      </div>
      <div class="navbar-item is-hidden-desktop">
        <span class="icon-text is-flex-wrap-nowrap">
          <span class="icon">ⓒ</span>
          <span>{{ site_identity.title }} {% now "Y" %}
            {% if site_identity.footer_copy_message %}- {{ site_identity.footer_copy_message }}{% endif %}
          </span>
        </span>
      </div>
    </div>
  </nav>
</div>
